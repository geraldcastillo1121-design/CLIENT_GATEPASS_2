<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DC Monorack Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="authSection">
         <div class="logo-container">
        <img src="j.png" alt="Logo" class="logo-img">
    </div>
    <div class="form-wrapper">
        <form id="loginForm" class="form active" onsubmit="event.preventDefault(); loginSuccess();">
            <h2 class="form-title login-title">Log in</h2>
            <input type="text" placeholder="Username" required>
            <div class="password-field">
                <input type="password" placeholder="Password" required id="loginPassword">
                <img src="ceye.png" alt="Show Password" class="toggle-password" onclick="togglePassword('loginPassword', this)">
            </div>
            <button type="submit" class="btn btn-login">Log in</button>
            <div class="forgot-row">
                <a href="#" class="forgot-link">Forgot Password?</a>
            </div>
            <hr>
            <button type="button" class="btn btn-create" onclick="showSignup()">Create new Account</button>
        </form>
        <form id="signupForm" class="form">
            <h2 class="form-title signup-title">Sign up</h2>
            <input type="text" placeholder="Full Name" required>
            <input type="text" placeholder="Position" required>
            <input type="text" placeholder="Contact#" required>
            <input type="text" placeholder="Address" required>
            <input type="password" placeholder="Password" required id="signupPassword">
            <input type="password" placeholder="Confirm Password" required>
            <button type="submit" class="btn btn-create-account">Create</button>
            <button type="button" class="btn btn-back" onclick="showLogin()">← Back</button>
        </form>
    </div>
    <script>
        function showSignup() {
            document.getElementById('loginForm').classList.remove('active');
            document.getElementById('signupForm').classList.add('active');
        }
        function showLogin() {
            document.getElementById('signupForm').classList.remove('active');
            document.getElementById('loginForm').classList.add('active');
        }
        function loginSuccess() {
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'block';
            document.getElementById('sideMenu').style.display = 'none'; // Close side menu on login
            showDashboard(); // Show dashboard by default after login
        }
        function togglePassword(id, el) {
            const input = document.getElementById(id);
            if (input.type === "password") {
                input.type = "text";
                el.src = "eye.png";
            } else {
                input.type = "password";
                el.src = "ceye.png";
            }
        }
    </script>
    
    </div>

    <div id="dashboardSection" style="display:none;">
        <header class="dashboard-header">
            <img src="dclogo.png" alt="Logo" class="logo-img">
            <button class="menu-btn" onclick="toggleMenu()">☰</button>
        </header>
        <hr>
        <nav id="sideMenu" class="side-menu" style="display:none;">
            <button class="close-btn" onclick="toggleMenu()">✖</button>
            <div class="menu-option profile-option" onclick="showProfile()">
        <img src="Usrname.jpg" class="profile-img" alt="Profile">
        <span id="profileName">Profile</span>
    </div>
    <div class="menu-option" onclick="showDashboard()">
        Home
    </div>
    <div class="menu-option" onclick="showReport()">
        Report
    </div>
    <div class="menu-option" onclick="logout()">
        Logout
    </div>
        </nav>
        <main>
            <section id="dashboardMain">
    <div class="dashboard-buttons">
        <button class="dashboard-btn" onclick="showGatePassForm()">
            <img src="ex.png" alt="Gate Pass" class="dashboard-icon">
            <span>Gate Pass</span>
        </button>
        <button class="dashboard-btn" onclick="showOfficialBusinessForm()">
            <img src="obicon.png" alt="Official Business" class="dashboard-icon">
            <span>Official Business</span>
        </button>
    </div>
    <h2 class="recent-title">
        <span class="recent-history">Recent History</span>
        <span class="view-all-link" onclick="showAllHistory()">View all</span>
        <hr />
    </h2>
    <div id="historyList">
        <!-- History cards will be injected here -->
    </div>
</section>
            <section id="profileSection" style="display:none;">
    <div class="profile-card">
        <img src="Usrname.png" class="profile-img" alt="Profile" id="profileImgPreview" style="cursor:pointer;">
        <input type="file" id="profileImgInput" accept="image/*" style="display:none;">
        <form id="profileForm" onsubmit="event.preventDefault(); saveProfile();">
            <label>Name:</label>
            <input type="text" id="profileNameInput" value="Gerald">
            <label>Position:</label>
            <input type="text" id="profilePositionInput" value="IT Officer">
            <label>Department:</label>
            <input type="text" id="profileDepartmentInput" value="IT Department">
            <label>Contact#:</label>
            <input type="text" id="profileContactInput" value="09407124318">
            <label>Email:</label>
            <input type="text" id="profileEmailInput" value="Juan.delacruz@gmail.com">
            <label>Address:</label>
            <input type="text" id="profileAddressInput" value="Bagong Silang, Plaridel, bulacan">
            <button type="submit" class="btn btn-login">Save</button>
        </form>
    </div>
</section>
            <section id="gatePassFormSection" style="display:none;">
                <!-- Gate Pass form -->
                 <div class="form-card">
                    <h2 class="form-title">Gate Pass</h2>
                    <hr>
                    <form id="gatePassForm" onsubmit="event.preventDefault(); submitGatePass();">
                        <label>Employee Name:</label>
                        <input type="text" name="name" required>
                        <label>Position:</label>
                        <input type="text" name="position" required>
                        <label>Date of Request:</label>
                        <input type="date" name="date" required>
                        <label>Time out:</label>
                        <input type="time" name="timeout" required>
                        <label>Est Time in:</label>
                        <input type="time" name="estin" required>
                        <label>Purpose:</label>
                        <input type="text" name="purpose" required>
                        <button type="submit" class="btn btn-login">Submit</button>
                    </form>
                </div>
            </section>
            <section id="officialBusinessFormSection" style="display:none;">
                <!-- Official Business form -->
                 <div class="form-card">
                        <h2 class="form-title">Official Business</h2>
                        <hr>
                        <form id="officialBusinessForm" onsubmit="event.preventDefault(); submitOfficialBusiness();">
                            <label>Employee Name:</label>
                            <input type="text" name="name" required>
                            <label>Position:</label>
                            <input type="text" name="position" required>
                            <label>Department:</label>
                            <input type="text" name="department" required>
                            <label>Date of Request:</label>
                            <input type="date" name="date" required>
                            <label>From:</label>
                            <input type="text" name="from" required>
                            <label>Itinerary/Destination:</label>
                            <input type="text" name="destination" required>
                            <label>Time Of Departure:</label>
                            <input type="time" name="departure" required>
                            <label>Arrival:</label>
                            <input type="time" name="arrival" required>
                            <label>Purpose:</label>
                            <input type="text" name="purpose" required>
                            <button type="submit" class="btn btn-login">Submit</button>
                        </form>
                    </div>
            </section>
            <section id="reportSection" style="display:none;">
    <div class="form-card">
        <h2 class="form-title">Report a Problem</h2>
        <hr>
        <form id="reportForm" onsubmit="event.preventDefault(); submitReport();">
            <label>Your Name:</label>
            <input type="text" name="reporter" required>
            <label>Department:</label>
            <input type="text" name="department" required>
            <label>Problem Title:</label>
            <input type="text" name="title" required>
            <label>Description:</label>
            <textarea name="description" rows="4" required style="width:100%;border-radius:8px;border:1px solid #bbb;font-size:1rem;"></textarea>
            <button type="submit" class="btn btn-login">Submit</button>
        </form>
    </div>
</section>
        </main>
    </div>

    <div id="allHistoryModal" class="modal" style="display:none;">
    <div class="modal-content">
        <span class="close-modal" onclick="hideAllHistory()">&times;</span>
        <h2>All History</h2>
        <div id="allHistoryList"></div>
    </div>
</div>

<div id="confirmationModal" class="modal" style="display:none;">
    <div class="modal-content">
        <span class="close-modal" onclick="closeConfirmation()">&times;</span>
        <h2 id="confirmationTitle"></h2>
        <p id="confirmationMessage"></p>
        <button class="btn btn-login" onclick="closeConfirmation()">OK</button>
    </div>
</div>

    <script>
        // Show dashboard after login (simulate for demo)
        function loginSuccess() {
            document.getElementById('authSection').style.display = 'none';
            document.getElementById('dashboardSection').style.display = 'block';
            document.getElementById('sideMenu').style.display = 'none';
            showDashboard();
        }
        function showGatePassForm() {
                hideAllSections();
                document.getElementById('gatePassFormSection').style.display = 'block';
            }
            function showOfficialBusinessForm() {
                hideAllSections();
                document.getElementById('officialBusinessFormSection').style.display = 'block';
            }
            function showDashboard() {
                document.getElementById('dashboardMain').style.display = 'block';
                document.getElementById('profileSection').style.display = 'none';
                document.getElementById('gatePassFormSection').style.display = 'none';
                document.getElementById('officialBusinessFormSection').style.display = 'none';
                document.getElementById('reportSection').style.display = 'none';
                toggleMenu();
            }
            function showProfile() {
                document.getElementById('dashboardMain').style.display = 'none';
                document.getElementById('profileSection').style.display = 'block';
                document.getElementById('gatePassFormSection').style.display = 'none';
                document.getElementById('officialBusinessFormSection').style.display = 'none';
                document.getElementById('reportSection').style.display = 'none';
                toggleMenu();
            }
            function showReport() {
                hideAllSections();
                document.getElementById('reportSection').style.display = 'block';
                toggleMenu();
            }
            function hideAllSections() {
                document.getElementById('dashboardMain').style.display = 'none';
                document.getElementById('profileSection').style.display = 'none';
                document.getElementById('gatePassFormSection').style.display = 'none';
                document.getElementById('officialBusinessFormSection').style.display = 'none';
                document.getElementById('reportSection').style.display = 'none';
            }
            function toggleMenu() {
                const menu = document.getElementById('sideMenu');
                menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
            }
            function logout() {
                document.getElementById('dashboardSection').style.display = 'none';
                document.getElementById('authSection').style.display = 'block';
            }
 
        function submitGatePass() {
            const form = document.getElementById('gatePassForm');
            const data = {
                name: form.name.value,
                position: form.position.value,
                date: form.date.value,
                timeout: form.timeout.value,
                estin: form.estin.value,
                purpose: form.purpose.value
            };
            addHistoryCard('gatepass', data);

            showConfirmation('Gate Pass Submitted', '', data);
        }

function submitOfficialBusiness() {
    const form = document.getElementById('officialBusinessForm');
    const data = {
        name: form.name.value,
        position: form.position.value,
        department: form.department.value,
        date: form.date.value,
        from: form.from.value,
        destination: form.destination.value,
        departure: form.departure.value,
        arrival: form.arrival.value,
        purpose: form.purpose.value
    };
    addHistoryCard('business', data);
    showConfirmation('Official Business Submitted', '', data);
}

function submitReport() {
    const form = document.getElementById('reportForm');
    const data = {
        reporter: form.reporter.value,
        department: form.department.value,
        title: form.title.value,
        description: form.description.value
    };
    showConfirmation('Report Submitted', 'Thank you for reporting the problem. We will review it as soon as possible.');
    // Optionally, you can add this to history or send to server here
}

function showConfirmation(title, message, data = null) {
    document.getElementById('confirmationTitle').textContent = title;
    document.getElementById('confirmationMessage').textContent = message;

    // Show submitted data if provided
    const modalContent = document.querySelector('#confirmationModal .modal-content');
    // Remove previous data if any
    const oldDataDiv = document.getElementById('confirmationData');
    if (oldDataDiv) oldDataDiv.remove();

    if (data) {
        const dataDiv = document.createElement('div');
        dataDiv.id = 'confirmationData';
        dataDiv.style.margin = '18px 0';
        dataDiv.style.background = '#fafafa';
        dataDiv.style.borderRadius = '8px';
        dataDiv.style.padding = '12px';
        dataDiv.style.fontSize = '1.1rem';
        dataDiv.style.color = '#444';

        let html = '';
        // Gatepass
        if (title.includes('Gate Pass')) {
            html += `<div><b>Name:</b> ${data.name}</div>`;
            html += `<div><b>Position:</b> ${data.position}</div>`;
            html += `<div><b>Date:</b> ${data.date}</div>`;
            html += `<div><b>Time out:</b> ${data.timeout}</div>`;
            html += `<div><b>Est Time in:</b> ${data.estin}</div>`;
            html += `<div><b>Purpose:</b> ${data.purpose}</div>`;
        }
        // Official Business
        else if (title.includes('Official Business')) {
            html += `<div><b>Name:</b> ${data.name}</div>`;
            html += `<div><b>Position:</b> ${data.position}</div>`;
            html += `<div><b>Department:</b> ${data.department}</div>`;
            html += `<div><b>Date:</b> ${data.date}</div>`;
            html += `<div><b>From:</b> ${data.from}</div>`;
            html += `<div><b>Itinerary/Destination:</b> ${data.destination}</div>`;
            html += `<div><b>Departure:</b> ${data.departure}</div>`;
            html += `<div><b>Arrival:</b> ${data.arrival}</div>`;
            html += `<div><b>Purpose:</b> ${data.purpose}</div>`;
        }
        dataDiv.innerHTML = html;
        // Insert before OK button
        const okBtn = modalContent.querySelector('button');
        modalContent.insertBefore(dataDiv, okBtn);
    }

    document.getElementById('confirmationModal').style.display = 'flex';
}

function closeConfirmation() {
    document.getElementById('confirmationModal').style.display = 'none';
    document.getElementById('sideMenu').style.display = 'block'; // Hide side menu
    showDashboard();
}
function addHistoryCard(type, data) {
    const historyList = document.getElementById('historyList');
    let card = document.createElement('div');
    card.className = 'history-card';
    if(type === 'gatepass') {
        card.innerHTML = `
            <div class="card-title" style="font-size:20px; color:#656A73;">Gate Pass <span class="status pending">Pending</span></div>
            <hr />
            <div><b>Name:</b> <span class="name">${data.name}</span></div>
            <div><b>Position:</b> <span class="position">${data.position}</span></div>
            <div><b>Date:</b> <span class="date">${data.date}</span></div>
            <div><b>Time out:</b> <span class="timeout">${data.timeout}</span></div>
            <div><b>Est Time in:</b> <span class="estin">${data.estin}</span></div>
            <div><b>Purpose:</b> <span class="purpose">${data.purpose}</span></div>
        `;
    } else {
        card.innerHTML = `
            <div class="card-title" style="font-size:20px; color:#656A73;">Official Business <span class="status pending">Pending</span></div>
            <hr />
            <div><b>Name:</b> <span class="names">${data.name}</span></div>
            <div><b>Position:</b> <span class="positions">${data.position}</span></div>
            <div><b>Department:</b> <span class="department">${data.department}</span></div>
            <div><b>From:</b> <span class="from">${data.from}</span></div>
            <div><b>Destination:</b> <span class="destination">${data.destination}</span></div>
            <div><b>Date:</b> <span class="dates">${data.date}</span></div>
            <div><b>Departure:</b> <span class="departure">${data.departure}</span></div>
            <div><b>Arrival:</b> <span class="arrival">${data.arrival}</span></div>
            <div><b>Purpose:</b> <span class="purpose">${data.purpose}</span></div>
        `;
    }
    historyList.prepend(card);
}
    </script>
    <script>
function saveProfile() {
    document.getElementById('profileName').textContent = document.getElementById('profileNameInput').value;
    showConfirmation('Profile Saved', 'Your profile information has been updated successfully.');
}
</script>
<script>
function showAllHistory() {
    // Copy all history cards to modal
    const historyList = document.getElementById('historyList');
    const allHistoryList = document.getElementById('allHistoryList');
    allHistoryList.innerHTML = historyList.innerHTML;
    document.getElementById('allHistoryModal').style.display = 'flex';
}
function hideAllHistory() {
    document.getElementById('allHistoryModal').style.display = 'none';
}
</script>
<script>
document.addEventListener('click', function(event) {
    const sideMenu = document.getElementById('sideMenu');
    const menuBtn = document.querySelector('.menu-btn');
    if (!sideMenu || !menuBtn) return;

    // Only collapse if menu is open
    if (sideMenu.style.display === 'block') {
        // If click is outside the menu and not on the menu button
        if (!sideMenu.contains(event.target) && event.target !== menuBtn) {
            sideMenu.style.display = 'none';
        }
    }
});
</script>
<script>
document.getElementById('profileImgPreview').onclick = function() {
    document.getElementById('profileImgInput').click();
};
document.getElementById('profileImgInput').onchange = function(event) {
    const file = event.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
            // Change profile image in profile section
            document.getElementById('profileImgPreview').src = e.target.result;
            // Change profile image in side menu
            const sideMenuImg = document.querySelector('.profile-option .profile-img');
            if (sideMenuImg) {
                sideMenuImg.src = e.target.result;
            }
        };
        reader.readAsDataURL(file);
    }
};
</script>
</body>
</html>